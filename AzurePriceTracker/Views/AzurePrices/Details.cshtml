@model List<ProductDetail>

<link rel="stylesheet" type="text/css" href="https://rawgit.com/vitmalina/w2ui/master/dist/w2ui.min.css">

<div class="container mt-4">
    <h1 class="mb-4">@ViewBag.ServiceFamily <small class="text-muted">@ViewBag.ServiceName</small></h1>

    <div id="grid" style="width: 100%; height: 500px;"></div>

    <a asp-action="Index" class="btn btn-secondary mt-3">Back to Services</a>
</div>

<script type="module">
    import { w2grid } from 'https://rawgit.com/vitmalina/w2ui/master/dist/w2ui.es6.min.js';

    let grid = new w2grid({
        name: 'productsGrid',
        box: '#grid',
        show: {
            toolbar: true,
            footer: true,
            lineNumbers: true,
            toolbarSearch: true,
            toolbarReload: true
        },
        columns: [
            { field: 'ProductName', text: 'Product', size: '25%' },
            { field: 'SkuName', text: 'SKU', size: '25%' },
            { field: 'Price', text: 'Price', size: '100px'},
            { field: 'Location', text: 'Location', size: '20%' },
            { field: 'UnitOfMeasure', text: 'Unit', size: '100px' },
            { field: 'Type', text: 'Type', size: '120px' }
        ],
        records: @Html.Raw(System.Text.Json.JsonSerializer.Serialize(
        Model.Select((p, i) => new
        {
            recid = i + 1,
            p.ProductName,
            p.SkuName,
            p.Price,
            p.Location,
            p.UnitOfMeasure,
            p.Type
        })
        ))
        });
</script>
